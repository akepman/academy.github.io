<!DOCTYPE html>
<html lang="ru" dir="ltr" prefix="content: http://purl.org/rss/1.0/modules/content/  dc: http://purl.org/dc/terms/  foaf: http://xmlns.com/foaf/0.1/  og: http://ogp.me/ns#  rdfs: http://www.w3.org/2000/01/rdf-schema#  schema: http://schema.org/  sioc: http://rdfs.org/sioc/ns#  sioct: http://rdfs.org/sioc/types#  skos: http://www.w3.org/2004/02/skos/core#  xsd: http://www.w3.org/2001/XMLSchema# ">
  
<!-- Mirrored from academy.terrasoft.ua/docs/release/instrukciya-po-obnovleniyu-site/instrukciya-po-obnovleniyu by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 22 Mar 2022 19:53:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
          <!-- Google Tag Manager -->
      <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
          j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
          '../../../../www.googletagmanager.com/gtm5445.html?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-KLLB8G');</script>
      <!-- End Google Tag Manager -->
        <meta charset="utf-8" />
<link rel="canonical" href="instrukciya-po-obnovleniyu.html" />
<meta name="description" content="Данная инструкция поможет вам обновить приложение Creatio до последней версии независимо от того, какая версия приложения установлена у вас сейчас. С обзором изменений и улучшений, реализованных в новой версии Creatio, вы можете ознакомиться в описании релизов." />
<meta property="og:url" content="https://academy.terrasoft.ua/docs/release/instrukciya-po-obnovleniyu-site/instrukciya-po-obnovleniyu" />
<meta property="og:title" content="Инструкция по обновлению" />
<meta property="og:description" content="Данная инструкция поможет вам обновить приложение Creatio до последней версии независимо от того, какая версия приложения установлена у вас сейчас. С обзором изменений и улучшений, реализованных в новой версии Creatio, вы можете ознакомиться в описании релизов." />
<meta name="Generator" content="Drupal 9 (https://www.drupal.org)" />
<meta name="MobileOptimized" content="width" />
<meta name="HandheldFriendly" content="true" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="../../themes/custom/creatio/favicon.ico" type="image/vnd.microsoft.icon" />
<link rel="revision" href="instrukciya-po-obnovleniyu.html" />

    <title>Инструкция по обновлению | Creatio Academy</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600&amp;family=Open+Sans:ital,wght@0,300;0,400;0,600;1,400&amp;display=swap" rel="stylesheet">
    <link rel="stylesheet" media="all" href="../../sites/default/files/css/css_1jCFiTcBV91qBcuP4N9bSf9AWOv9OjFpQpmULX2nX9Y.css" />
<link rel="stylesheet" media="all" href="../../sites/default/files/css/css_hR9fpYyVh6oycbmxUgpQj0kvlDcehuOjLIV7mGrrJvI.css" />
<link rel="stylesheet" media="print" href="../../sites/default/files/css/css_Zn4VHvcniOOtUwkIVwXzYr_0AI9gUVgZcPqaH4ViagU.css" />

    
  </head>
  <body class="path-node page-node-type-update-guide">
          <!-- Google Tag Manager (noscript) -->
      <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KLLB8G"
                        height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
      <!-- End Google Tag Manager (noscript) -->
    
        
      <div class="dialog-off-canvas-main-canvas" data-off-canvas-main-canvas>
    <div class="creatio-page d-flex flex-column">
        <div class="region region-informer">
    <div id="block-terrasoftpidtrimueukrainu" class="block block-simple-block block-simple-blockterrasoft-pidtrimue-ukrainu">
  
    
      <style type="text/css">
<!--/*--><![CDATA[/* ><!--*/
@import url(../../../../www.terrasoft.ua/themes/custom/creatio/css/components/informer.css)

/*--><!]]>*/
</style><div class="ts-swu">
<div class="creatio-container">
<div class="ts-swu__cont">
<div><a class="ts-swu__link" href="https://www.terrasoft.ua/terrasoft-stands-with-ukraine" target="_blank">Україна понад усе!</a> <span><a href="https://www.terrasoft.ua/terrasoft-stands-with-ukraine" target="_blank">Приєднуйтеся</a> до допомоги!</span></div>
</div>
</div></div>

  </div>

  </div>

  
  <header role="banner">
          <div class="creatio-region creatio-region_top">
        <div class="creatio-container">
            <div class="region region-top">
    <div id="block-menutoggle" class="block block-simple-block block-simple-blockmenu-toggle">
  
    
      <div class="menu-toggle"><span> </span></div>

  </div>
<div id="block-logowhite-2" class="block block-simple-block block-simple-blocklogo-white">
  
    
      <p><a class="site-logo" href="../../../index.html" rel="home"><img src="../../themes/custom/creatio/logo-white.svg" /></a></p>

  </div>
<div id="block-search" class="block block-simple-block block-simple-blocksearch">
  
    
      <div class="search">
<form action="https://academy.terrasoft.ua/search" class="search-form" method="get"><input class="search-form__input" name="search" placeholder="Поиск" type="search" /><input class="search-form__button" type="submit" value="Поиск" /> </form>

<div class="search-toggle"> </div>
</div>

  </div>
<nav role="navigation" aria-labelledby="block-sitesua-menu" id="block-sitesua" class="block block-menu navigation menu--sites-ua">
            
  <h2 class="visually-hidden" id="block-sitesua-menu">Sites UA</h2>
  

        
              <ul class="menu">
                    <li class="menu-item">
        <a href="https://www.terrasoft.ua/" rel="nofollow" target="_blank">Terrasoft</a>
              </li>
                <li class="menu-item">
        <a href="https://community.terrasoft.ua/" rel="nofollow" target="_blank">Community</a>
              </li>
                <li class="menu-item">
        <a href="https://marketplace.terrasoft.ua/" rel="nofollow" target="_blank">Marketplace</a>
              </li>
        </ul>
  


  </nav>
<div id="block-usermenu" class="block block-ts-user block-ts-user-menu-block">
  
    
      <ul class="user-menu">
      <li class="user-menu__item">
      <a class="user-menu__link" href="https://profile.terrasoft.ua/user/login?destination=academy/ua/docs/release/instrukciya-po-obnovleniyu-site/instrukciya-po-obnovleniyu">Войти</a>
    </li>
  </ul>

  </div>
<div id="block-usermenumobile" class="block block-ts-user block-ts-user-menu-mobile-block">
  
    
      <ul class="user-menu-mobile">
      <li class="user-menu-mobile__item">
      <div class="user-menu-mobile__user user-menu-mobile__user_icon"></div>
      <ul class="user-menu-mobile__submenu">
        <li class="user-menu-mobile__subitem">
          <a class="user-menu-mobile__sublink" href="https://profile.terrasoft.ua/user/login?destination=academy/ua/docs/release/instrukciya-po-obnovleniyu-site/instrukciya-po-obnovleniyu">Войти</a>
        </li>
      </ul>
    </li>
  </ul>

  </div>

  </div>

        </div>
      </div>
              <div class="creatio-region creatio-region_header">
        <div class="creatio-container">
            <div class="region region-header">
    <div id="block-logo" class="block block-simple-block block-simple-blocklogo">
  
    
      <p><a class="site-logo" href="../../../index.html" rel="home"><img src="../../themes/custom/creatio/logo.svg" /></a></p>

  </div>
<nav role="navigation" aria-labelledby="block-osnovnayanavigaciyaua-menu" id="block-osnovnayanavigaciyaua" class="block block-menu navigation menu--main-ua">
            
  <h2 class="visually-hidden" id="block-osnovnayanavigaciyaua-menu">Основная навигация UA</h2>
  

        
              <ul class="menu">
                    <li class="menu-item">
        <a href="../../index.html" data-drupal-link-system-path="&lt;front&gt;">Документация</a>
              </li>
                <li class="menu-item">
        <a href="../../../trainings.html">Тренинги</a>
              </li>
                <li class="menu-item">
        <a href="../../certification.html" data-drupal-link-system-path="node/3084">Сертификация и тестирование</a>
              </li>
        </ul>
  


  </nav>
<nav role="navigation" aria-labelledby="block-sitesua-2-menu" id="block-sitesua-2" class="block block-menu navigation menu--sites-ua">
            
  <h2 class="visually-hidden" id="block-sitesua-2-menu">Sites UA</h2>
  

        
              <ul class="menu">
                    <li class="menu-item">
        <a href="https://www.terrasoft.ua/" rel="nofollow" target="_blank">Terrasoft</a>
              </li>
                <li class="menu-item">
        <a href="https://community.terrasoft.ua/" rel="nofollow" target="_blank">Community</a>
              </li>
                <li class="menu-item">
        <a href="https://marketplace.terrasoft.ua/" rel="nofollow" target="_blank">Marketplace</a>
              </li>
        </ul>
  


  </nav>

  </div>

        </div>
      </div>
              <div class="creatio-region creatio-region_breadcrumb">
        <div class="creatio-container">
            <div class="region region-breadcrumb">
    <div id="block-logowhite" class="block block-simple-block block-simple-blocklogo-white">
  
    
      <p><a class="site-logo" href="../../../index.html" rel="home"><img src="../../themes/custom/creatio/logo-white.svg" /></a></p>

  </div>
<div id="block-breadcrumbnaviagtion" class="block block-ts-nav block-ts-nav-bread">
  
    
      <nav class="breadcrumb"><ol class="ts-nav-breadcrumb__list"><li class="ts-nav-breadcrumb__item"><a href="../../index.html" class="ts-nav-breadcrumb__link" title="Документация">Документация</a></li>
<li class="ts-nav-breadcrumb__item ts-nav-breadcrumb__item_mobile"><a href="../../index11e8.html?vid_1=3" class="ts-nav-breadcrumb__link" title="Релизы">Релизы</a></li>
<li class="ts-nav-breadcrumb__item"><span class="ts-nav-breadcrumb__link ts-nav-breadcrumb__link_current" title="Инструкция по обновлению">Инструкция по обновлению</span></li>
</ol>
</nav>

  </div>
<div id="block-search-2" class="block block-simple-block block-simple-blocksearch">
  
    
      <div class="search">
<form action="https://academy.terrasoft.ua/search" class="search-form" method="get"><input class="search-form__input" name="search" placeholder="Поиск" type="search" /><input class="search-form__button" type="submit" value="Поиск" /> </form>

<div class="search-toggle"> </div>
</div>

  </div>

  </div>

        </div>
      </div>
      </header>

  <div class="creatio-region creatio-region_main">
    <div class="creatio-container">
                <div class="region region-breadcrumb-mobile">
    <div id="block-breadcrumbnaviagtion-2" class="block block-ts-nav block-ts-nav-bread">
  
    
      <nav class="breadcrumb"><ol class="ts-nav-breadcrumb__list"><li class="ts-nav-breadcrumb__item"><a href="../../index.html" class="ts-nav-breadcrumb__link" title="Документация">Документация</a></li>
<li class="ts-nav-breadcrumb__item ts-nav-breadcrumb__item_mobile"><a href="../../index11e8.html?vid_1=3" class="ts-nav-breadcrumb__link" title="Релизы">Релизы</a></li>
<li class="ts-nav-breadcrumb__item"><span class="ts-nav-breadcrumb__link ts-nav-breadcrumb__link_current" title="Инструкция по обновлению">Инструкция по обновлению</span></li>
</ol>
</nav>

  </div>

  </div>

      
      <main class="creatio-main" role="main">
                                                    
        <div class="creatio-content creatio-content_small">
          <div class="creatio-content__inner creatio-content__inner_bg">
                            <div class="region region-messages">
    <div data-drupal-messages-fallback class="hidden"></div>

  </div>

            
              <div class="region region-content">
    <div id="block-creatio-page-title" class="block block-core block-page-title-block">
  
    
      
  <h1 class="page-title"><span class="field field--name-title field--type-string field--label-hidden">Инструкция по обновлению</span>
</h1>


  </div>
<div id="block-creatio-content" class="block block-system block-system-main-block">
  
    
      
<article data-history-node-id="2443" role="article" about="/docs/release/instrukciya-po-obnovleniyu-site/instrukciya-po-obnovleniyu" class="node node--type-update-guide node--view-mode-full">

  
    

  
  <div class="node__content">
      <div class="layout layout--onecol">
    <div  class="layout__region layout__region--content">
      <div class="block block-ts-doc block-ts-doc-downloads">
  
    
      <a href="../../sites/default/files/pdf/node/2443/Instrukciya_po_obnovleniyu_.pdf" target="_blank">PDF</a>
  </div>

    </div>
  </div>
  <div class="layout layout--onecol">
    <div  class="layout__region layout__region--content">
      <div class="block block-layout-builder block-field-blocknodeupdate-guidebody">
  
    
      
            <div class="clearfix text-formatted field field--name-body field--type-text-with-summary field--label-hidden field__item"><p>Данная инструкция поможет вам обновить приложение Creatio до последней версии независимо от того, какая версия приложения установлена у вас сейчас. С обзором изменений и улучшений, реализованных в новой версии Creatio, вы можете ознакомиться в <a href="../opisanie-relizov/opisanie-reliza-80-atlas.html">описании релизов</a>.</p>

<div class="message">
<p><span class="message__bold">На заметку.</span> Для обновления Creatio на сервере приложения нужны .NET Framework версии 4.7.2 и Runtime, при необходимости скачайте актуальную версию приложения: <a href="https://dotnet.microsoft.com/download/thank-you/net472" target="blank">скачать .NET Framework 4.7.2</a>.</p>

<p>Также обновите Developer pack: <a href="https://dotnet.microsoft.com/download/thank-you/net472-developer-pack" target="blank">скачать Developer pack</a>.</p>

<p>Начиная с версии 7.16.0 для корректной компиляции конфигурации необходимо скачать и установить .NET Core SDK 3.1 x64: <a href="https://dotnet.microsoft.com/download/dotnet-core/3.1" target="blank">скачать .NET Core SDK 3.1 x64</a>. После установки SDK необходимо выполнить перезагрузку хоста. </p>
</div>

<p>Прежде чем приступить к обновлению, перейдите в раздел <span class="key">Конфигурация</span> и выполните последовательно действия <span class="key">Сгенерировать исходный код для всех элементов</span> и <span class="key">Компилировать все</span>. Если в результате выполнения этих действий возникнут ошибки, их необходимо исправить, и только после этого начинать процедуру обновления.</p>

<div class="message">
<p><span class="message__bold">На заметку.</span> Некоторые шаги процесса отличаются для MS SQL Server, Oracle Database и PostgreSQL.</p>
</div>

<div class="message message_warning">
<p><span class="message__bold message__bold_warning">Важно.</span> Для обновления приложения с версий ниже, чем 7.8.0, обратитесь в службу поддержки Terrasoft за дополнительными инструкциями.</p>
</div>

<p><a name="HT_howto" id="HT_howto"></a></p>

<h2>Как выполнить обновление<a class="title-anchor" href="#title-2443-1" id="title-2443-1"> </a></h2>

<p>Рекомендуем выполнять обновление в два этапа:</p>

<ol><li>
	<p>Сначала выполните обновление на <strong>тестовом сайте</strong> с копией актуальной базы данных.</p>
	</li>
	<li>
	<p>Если первый этап завершился успешно, то обновите <strong>продуктивную (production)</strong> версию приложения.</p>

	<div class="message message_warning">
	<p><span class="message__bold message__bold_warning">Важно.</span> Обновление продуктивной версии нужно проводить не в бизнес-время, так как при этом сайт будет недоступен.</p>
	</div>
	</li>
</ol><p>В общем случае процесс обновления состоит из следующих шагов:</p>

<ol><li>
	<p><strong>Создайте копию базы данных и бинарных файлов продуктивного сайта</strong>, которые понадобятся для развертывания тестового сайта. Для создания резервной копии бинарных файлов просто заархивируйте их в любой другой директории.Подробнее: <a href="#HT_user_upgrade_instruction_backup">Создание резервной копии базы данных</a>.</p>
	</li>
	<li>
	<p><strong>Создайте тестовый сайт в IIS</strong>. Подробнее: <a href="../../user/razvertyvanie_onsite.html">Установка и настройка приложения Creatio on-site</a>.</p>
	</li>
	<li>
	<p><strong>Установите обновление на тестовый сайт</strong>. Подробнее: <a href="#HT_user_upgrade_instruction_install">Установка обновления</a>.</p>
	</li>
	<li>
	<p><strong>Проверьте корректность работы тестового сайта</strong>. Если основные и часто используемые функции выполняются без ошибок, то можно приступить к обновлению продуктивного сайта. Подробнее: <a href="#HT_user_upgrade_instruction_test_upgrade">Запуск, компиляция и проверка работы сайта</a>.</p>
	</li>
	<li>
	<p><strong>Создайте копии базы данных и приложения</strong>. Они понадобятся для возврата на рабочую версию в случае неполадок. Подробнее: <a href="#HT_user_upgrade_instruction_backup">Создание резервной копии базы данных</a>.</p>
	</li>
	<li>
	<p><strong>Остановите рабочую версию приложения</strong>. Подробнее: <a href="#HT_user_upgrade_instruction_stop">Остановка сайта</a>.</p>
	</li>
	<li>
	<p><strong>Установите обновление на продуктивную версию</strong>. Подробнее: <a href="#HT_user_upgrade_instruction_install">Установка обновления</a>.</p>
	</li>
	<li>
	<p><strong>Запустите сайт и проверьте работоспособность</strong> обновленного приложения. Подробнее: <a href="#HT_user_upgrade_instruction_test_upgrade">Запуск, компиляция и проверка работы сайта</a>.</p>
	</li>
</ol><p>Если ваше приложение работает в режиме <strong>веб-фермы</strong>, то после успешного обновления тестового и одного из продуктивных сайтов необходимо выполнить еще несколько шагов:</p>

<ol><li>
	<p><strong>Установить значения Data Source и Initial Catalog</strong> в файле Terrasoft.Tools.WorkspaceConsole.exe.config.</p>
	</li>
	<li>
	<p><strong>Отключить</strong> все сайты, кроме того, который был обновлен.</p>
	</li>
	<li>
	<p><strong>Скопировать</strong> в них содержимое папки myapp\webapp\conf с обновленного сайта.</p>
	</li>
	<li>
	<p><strong>Включить все сайты</strong>.</p>

	<div class="message">
	<p><span class="message__bold">На заметку.</span> Для возможности доменной авторизации при входе в систему необходимо перенести настройки аутентификации Windows в обновленное приложение. Подробнее: <a href="../../user/ustanovka_i_administrirovanie/upravlenie_polzovateljami_i_dostupom/autentifikaciya_v_prilojenii/autentifikacija_windows/autentifikaciya_windows.html?product=administration&amp;ver=7&amp;id=1432" target="blank">Как настроить аутентификацию Windows</a>.</p>
	</div>
	</li>
</ol><h2><a name="CSH_2" id="CSH_2"></a><a name="HT_user_upgrade_instruction_backup" id="HT_user_upgrade_instruction_backup"></a><a name="XREF_84644" id="XREF_84644"></a>Создание резервной копии базы данных<a class="title-anchor" href="#title-2443-2" id="title-2443-2"> </a></h2>

<p>Резервная копия базы данных продуктивного приложения нужна не только для возврата на рабочую версию сайта в случае неполадок, но также для создания тестового сайта.</p>

<div class="message">
<p><span class="message__bold">На заметку.</span> Если вы разворачиваете резервную копию БД продуктивного сайта и не хотите, чтобы на ней работали ваши интеграции, то выполните скрипт Disable_Synchronization.sql: <a href="../../../files/Disable_Synchronization.sql">скачать скрипт</a>.</p>
</div>

<div class="block-collapse">
<h3 class="block-collapse__title">Создание резервной копии базы данных MS SQL Server<a class="title-anchor" href="#title-2443-3" id="title-2443-3"> </a></h3>

<div class="block-collapse__content">
<ol><li>
	<p>Запустите Microsoft SQL Server Management Studio.</p>
	</li>
	<li>
	<p>Выберите команду <span class="key">Back Up</span> в разделе <span class="key">Tasks</span> в контекстном меню каталога базы данных приложения.</p>
	</li>
	<li>
	<p>Укажите название копии базы данных и каталог, в котором будет создана резервная копия. Нажмите <span class="key">OK</span>, чтобы начать резервное копирование (<a href="#XREF_72568_1"><span>Рис. 1</span></a>).</p>
	</li>
</ol><div class="media">
<div class="media__caption"><span class="FM_Picturecaptionnumber">Рис. 1</span><a name="XREF_72568_1" id="XREF_72568_1"></a> — Создание резервной копии базы данных</div>

<div class="media__element"><img alt="update_guide_backup" data-entity-type="file" data-entity-uuid="e6c9b4d5-858e-496d-b3c0-60a0ed143065" src="../../sites/default/files/inline-images/update_guide_backup_0.png" width="694" height="630" loading="lazy" /></div>
</div>

<div class="message">
<p><span class="message__bold">На заметку.</span> Убедитесь, что директория для сохранения резервной копии базы данных уже существует. Сервер SQL не имеет прав на создание каталогов.</p>
</div>

<p>В случае обновления продуктивной версии Creatio рекомендуем также создать копию приложения при помощи любого файлового менеджера.</p>

<p>Чтобы в дальнейшем <strong>открыть резервную копию</strong> базы данных:</p>

<ol><li>
	<p>Запустите и авторизируйтесь в Microsoft SQL Studio.</p>
	</li>
	<li>
	<p>Создайте новую базу данных, если необходимо извлечь часть данных из бэкапа, или выберите имеющуюся базу данных, если необходимо восстановить утерянные данные.</p>
	</li>
	<li>
	<p>В контекстном меню нужной базы данных выберите команду <span class="key">Restore Database</span>.</p>
	</li>
	<li>
	<p>В окне восстановления укажите путь к файлу резервной копии.</p>
	</li>
	<li>
	<p>Нажмите <span class="key">OK</span> и дождитесь восстановления данных.</p>
	</li>
</ol><p>Развертывание базы данных из резервной копии подробно описано в отдельной статье <a href="../../user/razvertyvanie_onsite/subd_server/ms_sql/razvernut_bazu_dannykh_ms_sql.html?product=administration&amp;ver=7&amp;id=2132">Развернуть базу данных MS SQL</a>.</p>
</div>
</div>

<div class="block-collapse">
<h3 class="block-collapse__title">Создание резервной копии базы данных Oracle Database<a class="title-anchor" href="#title-2443-4" id="title-2443-4"> </a></h3>

<div class="block-collapse__content">
<ol><li>
	<p>Подключитесь к серверу Oracle с помощью утилиты SqlPlus:</p>

	<div class="code">
	<div class="code__widgets">
	<div class="code__source">
	<pre class="prettyprint">
sqlplus "SYS/SYS_PASSWORD@ORACLE_HOST:ORACLE_PORT/SERVICE_NAME AS SYSDBA"</pre>
	</div>
	</div>
	</div>

	<ul><li>SYS_PASSWORD — пароль для авторизации на сервере Oracle;</li>
		<li>ORACLE_HOST — адрес сервера Oracle;</li>
		<li>ORACLE_PORT — порт сервера Oracle;</li>
		<li>SERVICE_NAME — имя сервиса Oracle.</li>
	</ul></li>
	<li>Выполните в SqlPlus следующие команды:
	<div class="code">
	<div class="code__widgets">
	<div class="code__source">
	<pre class="prettyprint">
CREATE OR REPLACE DIRECTORY DIRECTORY_ALIAS AS 'PATH_TO_BACKUP_DIRECTORY';
</pre>
	</div>
	</div>
	</div>

	<div class="code">
	<div class="code__widgets">
	<div class="code__source">
	<pre class="prettyprint">
GRANT READ, WRITE ON DIRECTORY DIRECTORY_ALIAS to BACKUP_SCHEMA_NAME; 
</pre>
	</div>
	</div>
	</div>

	<ul><li>DIRECTORY_ALIAS — псевдоним директории, в которой будет размещена резервная копия;</li>
		<li>PATH_TO_BACKUP_DIRECTORY — путь к директории, в которой будет размещена резервная копия;</li>
		<li>BACKUP_SCHEMA_NAME — имя схемы, для которой выполняется резервное копирование.</li>
	</ul></li>
	<li>Выполните резервное копирование схемы с помощью утилиты expdp:
	<div class="code">
	<div class="code__widgets">
	<div class="code__source">
	<pre class="prettyprint">
expdp "BACKUP_SCHEMA_NAME/BACKUP_SCHEMA_PASSWORD@//ORACLE_HOST:ORACLE_PORT/SERVICE_NAME" SCHEMAS=BACKUP_SCHEMA_NAME DIRECTORY=DIRECTORY_ALIAS dumpfile=BACKUP_FILE_NAME NOLOGFILE=YES</pre>
	</div>
	</div>
	</div>

	<ul><li>ORACLE_HOST — адрес сервера Oracle;</li>
		<li>ORACLE_PORT — порт сервера Oracle;</li>
		<li>SERVICE_NAME — имя сервиса Oracle;</li>
		<li>DIRECTORY_ALIAS — псевдоним директории, в которой будет размещена резервная копия;</li>
		<li>BACKUP_SCHEMA_NAME — имя схемы, для которой выполняется резервное копирование;</li>
		<li>BACKUP_SCHEMA_PASSWORD — пароль схемы, для которой выполняется резервное копирование;</li>
		<li>BACKUP_FILE_NAME — имя файла, в который будет выгружена схема.</li>
	</ul></li>
</ol><p>В результате работы утилиты expdp будет создана резервная копия схемы BACKUP_SCHEMANAME с именем файла BACKUP_FILE_NAME в директории PATH_TO_BACKUP_DIRECTORY.</p>

<p>Развертывание базы данных из резервной копии подробно описано в отдельной статье <a href="../../user/razvertyvanie_onsite/subd_server/oracle/razvernut_bazu_dannykh_oracle.html?product=administration&amp;ver=7&amp;id=2133">Развернуть базу данных Oracle</a>.</p>
</div>
</div>

<div class="block-collapse">
<h3 class="block-collapse__title">Создание резервной копии базы данных PostgreSQL<a class="title-anchor" href="#title-2443-5" id="title-2443-5"> </a></h3>

<div class="block-collapse__content">
<p>Для создания резервной копии базы данных необходима утилита <strong>pg_dump</strong>. Она находится в каталоге установленного программного обеспечения PostgreSQL.</p>

<p> </p>

<ol class="start"><li>
	<p>Установите пароль подключения к серверу базы данных в переменную окружения:</p>

	<div class="code">
	<div class="code__widgets">
	<div class="code__source">
	<pre class="prettyprint">
set PGPASSWORD=pg_password ("export PGPASSWORD=pg_password" – для linux)</pre>
	</div>
	</div>
	</div>
	</li>
	<li>Выполните следующую команду:
	<p> </p>

	<div class="code">
	<div class="code__widgets">
	<div class="code__source">
	<pre class="prettyprint">
"C:\PostgreSQL\pg_dump.exe" --host=#ServerIP# --port #ServerPort# --username #SysUserName# --format=c --blobs --verbose -c -f #BackupFilePath# #DatabaseName#</pre>
	</div>
	</div>
	</div>

	<ul><li><strong>ServerIP</strong> — адрес сервера PostgreSQL;</li>
		<li><strong>ServerPort</strong> — порт сервера PostgreSQL;</li>
		<li><strong>SysUserName</strong> — имя системного пользователя PostgreSQL (задается при установке PostgreSQL сервера);</li>
		<li><strong>SysUserPassword</strong> — пароль системного пользователя PostgreSQL (задается при установке PostgreSQL сервера);</li>
		<li><strong>BackupFilePath</strong> — директория, в которой будет размещена резервная копия;</li>
		<li><strong>DatabaseName</strong> — имя базы данных, для которой выполняется резервное копирование.</li>
	</ul></li>
</ol><p>В результате работы утилиты будет создана резервная копия базы данных в директории <strong>BackupFilePath</strong>.</p>

<p>Развертывание базы данных из резервной копии подробно описано в отдельных статьях <a href="../../user/razvertyvanie_onsite/linux_net_core/ustanovka/ustanovit_creatio_net_core_na_linux.html?product=administration&amp;ver=7&amp;id=2148">Развернуть базу данных PostgreSQL (Linux)</a> и <a href="../../user/razvertyvanie_onsite/subd_server/postgresql_windows/razvernut_bazu_dannykh_postgresql_windows.html?product=administration&amp;ver=7&amp;id=2134">Развернуть базу данных PostgreSQL (Windows)</a>.</p>
</div>
</div>

<h2><a name="CSH_3" id="CSH_3"></a><a name="HT_user_upgrade_instruction_install" id="HT_user_upgrade_instruction_install"></a><a name="XREF_15902" id="XREF_15902"></a><a name="XREF_55218_2" id="XREF_55218_2"></a><a name="XREF_39126" id="XREF_39126"></a><a name="HT_user_upgrade_instruction_install" id="HT_user_upgrade_instruction_install"></a>Установка обновления<a class="title-anchor" href="#title-2443-6" id="title-2443-6"> </a></h2>

<p>Чтобы установить обновление:</p>

<ol><li>Удалите временные файлы Creatio из каталога сайта.
	<p>Адреса файлов, которые необходимо удалить, указаны в настройке tempDirectory в блоке compilation (настройка находится в web.config loader-a и web.app).</p>

	<p>Если настройка tempDirectory не указана, то очистите файлы, хранящиеся по приведенным ниже адресам (где %ApplicationName% — имя сайта в IIS):</p>

	<p><strong><span>​64 bit</span></strong></p>

	<ul><li><span>​%windir%\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files%ApplicationName%</span></li>
		<li><span>%windir%\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files%ApplicationName%_0</span></li>
	</ul><p><strong><span>​32 bit</span></strong></p>

	<ul><li><span>​%windir%\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files%ApplicationName%</span></li>
		<li><span>%windir%\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files%ApplicationName%_0</span></li>
	</ul><div class="block-collapse">
	<h3 class="block-collapse__title">При отсутствии доступа к интернету на сервере приложения<a class="title-anchor" href="#title-2443-9" id="title-2443-9"> </a></h3>

	<div class="block-collapse__content">
	<p>Чтобы скачать все необходимые для обновления данные, вам понадобится компьютер, который подключен к интернету. Выполняйте на компьютере с доступом к интернету все инструкции шага "Установка обновления" до п. 4 включительно.</p>

	<p>После п. 4 перейдите на сервер приложения. Как это сделать, читайте в инструкции ниже.</p>
	</div>
	</div>
	</li>
	<li>
	<p>Скачайте сервис выгрузки дистрибутивов для обновления: <a href="https://academy.creatio.com/sites/default/files/documents/downloads/UpdaterService/UpdaterService.zip">скачать сервис</a>.</p>
	</li>
	<li>
	<p>Откройте файл скрипта <strong>downloader.json</strong> для редактирования. Заполните в нем все параметры соответствующими значениями:</p>

	<ul><li><strong>WebRootDirectory</strong> — путь к корневой папке сайта. Не указывайте этот параметр, если на сервере вашего приложения отсутствует доступ к интернету и вы выгружаете данные с другого компьютера.</li>
		<li>
		<p><strong>WorkDirectory</strong> — путь к папке, где будут сохраняться инсталяционные пакеты и утилита обновления.</p>
		</li>
		<li>
		<p><strong>Site</strong> — имя вашего сайта в IIS.</p>
		</li>
		<li><strong>Product</strong> — название продукта, на котором развернут сайт. Скопируйте нужное название из блока <strong>enum Product</strong> в файле Downloader.ps1.</li>
		<li>
		<p><strong>DbEngineType</strong> — тип СУБД. Скопируйте нужное название из блока <strong>enum DbEngineType</strong> в файле Downloader.ps1.</p>
		</li>
		<li><strong>VersionBuild</strong> — текущая версия вашего приложения.</li>
		<li><strong>SkipBinary</strong> — добавьте вручную этот параметр со значением “true” в downloader.json, если у вас уже есть дистрибутивные файлы и вы не хотите выкачивать их повторно.</li>
		<li><strong>ConnectionString</strong> — строка подключения к базе данных. Внимательно скопируйте данную строку с вашего подключения к базе. Не указывайте этот параметр, если на сервере вашего приложения отсутствует доступ к интернету и вы выгружаете данные с другого компьютера.</li>
		<li><strong>CurrentSchemaName</strong> — текущая схема в БД. Для MS SQL — “dbo”, для PostgreSql — “public”, для Oracle — ваша схема.</li>
		<li><strong>RedisServer</strong> — Redis-сервер.</li>
		<li><strong>RedisDB</strong> — номер базы Redis.</li>
		<li><strong>RedisPassword</strong> – пароль на Redis.</li>
		<li><strong>RedisPort</strong> — порт Redis.</li>
		<li><strong>UseAWS</strong> — добавьте вручную этот параметр со значением “true”, если вы используете AWS.</li>
	</ul><p>Обратите внимание, что параметры ниже не являются обязательными. Если их не указывать в downloader.json, то они будут определены автоматически по пути <strong>WebRootDirectory</strong>.</p>

	<ul><li><strong>ConnectionString</strong></li>
		<li><strong>CurrentSchemaName</strong></li>
		<li><strong>DbEngineType</strong></li>
		<li><strong>RedisServer</strong></li>
		<li><strong>RedisDB</strong></li>
		<li><strong>RedisPassword</strong></li>
		<li><strong>RedisPort</strong></li>
	</ul><p>Пример заполнения файла downloader.json:</p>

	<div class="code">
	<div class="code__widgets">
	<div class="code__source">
	<pre class="prettyprint">
{
"WebRootDirectory": "c:\\inetpub\\wwwroot\\delivery",
"WorkDirectory": "c:\\temp\\delivery",
"Site": "имя вашего сайта в IIS",
"Product": "Studio",
"VersionBuild": "7.14.1.935"
}</pre>
	</div>
	</div>
	</div>

	<div class="block-collapse">
	<h3 class="block-collapse__title">При отсутствии доступа к интернету на сервере приложения<a class="title-anchor" href="#title-2443-10" id="title-2443-10"> </a></h3>

	<div class="block-collapse__content">
	<p>Пример заполнения файла downloader.json, если на сервере вашего приложения отсутствует доступ к интернету, и вы выгружаете данные с другого компьютера:</p>

	<div class="code">
	<div class="code__widgets">
	<div class="code__source">
	<pre class="prettyprint">
{
"workDirectory": "c:\\temp\\delivery",
"Site": "имя вашего сайта в IIS",
"Product": "Studio",
"DbEngineType": "MSSQL",
"VersionBuild": "7.14.1.935",
"CurrentSchemaName": "dbo",
"RedisServer": "localhost",
"RedisDB": 1,
"RedisPort": 6379
}</pre>
	</div>
	</div>
	</div>
	</div>
	</div>

	<div class="message message_warning">
	<p><span class="message__bold message__bold_warning">Важно.</span> Обратите внимание, что во всех путях знак “\” указывается как “\\”.</p>
	</div>
	</li>
	<li>
	<p>Запустите Powershell-скрипт <strong>Downloader.ps1</strong>. Для корректной отработки данного скрипта должен быть установлен <strong>PowerShell 5.1 и выше</strong>.</p>

	<p>После выполнения скрипта в папке, которую вы указали в workDirectory, создается папка с набором пакетов обновлений InstallPackages и папка с утилитой обновления.</p>

	<p>В папке InstallPackages будет создана следующая структура папок/файлов:</p>

	<ul><li>
		<p>На каждую версию появляется отдельная папка в алфавитном порядке соответственно плану обновления.</p>
		</li>
		<li>
		<p>В каждой папке версии находится: архив с файлами соответствующей версии (в процессе обновления архив автоматически распакуется в папки App, Pkg, Template) и папка со сценарием (Scenario).</p>
		</li>
	</ul><p>Пример файловой структуры:</p>

	<p><img alt="folder_icon.png" src="../../../sites/default/files/documents/downloads/Update_guide_folder.png" /> ​7.16.0</p>

	<ul><li>
		<p class="indent">7.16.0.284_SalesTeam _SoftKey_MSSQL_ENU.zip</p>
		</li>
		<li>
		<p class="indent">Scenario</p>
		</li>
	</ul><p><img alt="folder_icon.png" src="../../../sites/default/files/documents/downloads/Update_guide_folder.png" /> ​7.16.1</p>

	<ul><li>
		<p class="indent">7.16.1.299 SalesTeam _SoftKey_MSSQL_ENU.zip</p>
		</li>
		<li>
		<p class="indent">Scenario</p>
		</li>
	</ul><p><img alt="folder_icon.png" src="../../../sites/default/files/documents/downloads/Update_guide_folder.png" /> <span>​7.16.2</span></p>

	<ul><li>
		<p class="indent">7.16.2.574_SalesTeam _SoftKey_MSSQL_ENU.zip</p>
		</li>
		<li>
		<p class="indent">Scenario</p>
		</li>
	</ul><div class="block-collapse">
	<h3 class="block-collapse__title">При отсутствии доступа к интернету на сервере приложения<a class="title-anchor" href="#title-2443-7" id="title-2443-7"> </a></h3>

	<div class="block-collapse__content">
	<p>Перед переходом к следующему шагу перейдите на сервер приложения. Для этого:</p>

	<ol><li>
		<p>Скопируйте сформированную папку (с набором пакетов обновлений InstallPackages, папкой с утилитой обновления Updater и файлом Start.bat) и переместите ее на сервер, где находится ваше приложение.</p>
		</li>
		<li>
		<p>Откройте файл скрипта <strong>install.xml</strong> из папки Updater для редактирования. Заполните в нем следующие параметры соответствующими значениями:</p>

		<ul><li><strong>WebRootDirectory</strong> — путь к корневой папке сайта.</li>
			<li><strong>InstallPackagesPath</strong> — путь к папке, где сохранены инсталляционные пакеты и утилита обновления.</li>
			<li><strong>ConnectionString</strong> — строка подключения к базе данных. Внимательно скопируйте данную строку с вашего подключения к базе.</li>
		</ul></li>
		<li>
		<p>Сохраните внесенные изменения.</p>
		</li>
	</ol></div>
	</div>

	<div class="block-collapse">
	<h3 class="block-collapse__title">Перед обновлением на версию 7.15.3<a class="title-anchor" href="#title-2443-8" id="title-2443-8"> </a></h3>

	<div class="block-collapse__content">
	<p>Перед обновлением на версию 7.15.3 вам необходимо убедиться в отсутствии кастомизаций ReportService в вашей конфигурации.</p>

	<p>Для этого используйте один из скриптов ниже в зависимости от того, какую систему управления базами данных вы используете: MSSQL или PostgreSQL.</p>
	<strong>Скрипт для MSSQL:</strong>

	<div class="code">
	<div class="code__widgets">
	<div class="code__source">
	<pre class="prettyprint">
{

declare @val as varchar(max) = ''

select @val = concat(@val, SchemaName, ', ')

from

(select SysSchema.Name as SchemaName

from SysSchemaContent with (nolock)

inner join SysSchema with(nolock) on SysSchemaContent.SysSchemaId = SysSchema.Id

inner join SysPackage with(nolock) on SysSchema.SysPackageId = SysPackage.Id

where

SysPackage.Maintainer != 'Terrasoft' and

SysSchema.ManagerName in ('EntitySchemaManager', 'PageSchemaManager',

'ProcessSchemaManager', 'ProcessUserTaskSchemaManager', 'SourceCodeSchemaManager') and

(

cast(SysSchemaContent.Content as varchar(max)) like '%Terrasoft.Reports%' or

cast(SysSchemaContent.Content as varchar(max)) like '%ReportSchemaManager%'

)

union

select SysSchema.Name as SchemaName

from SysSchema with(nolock)

inner join SysPackage with(nolock) on SysSchema.SysPackageId = SysPackage.Id

where

SysPackage.Maintainer != 'Terrasoft' and

SysSchema.ManagerName in ('EntitySchemaManager', 'PageSchemaManager',

'ProcessSchemaManager', 'ProcessUserTaskSchemaManager', 'SourceCodeSchemaManager') and

(

cast(SysSchema.MetaData as varchar(max)) like '%Terrasoft.Reports%' or

cast(SysSchema.MetaData as varchar(max)) like '%ReportSchemaManager%'

)

) as contentList

select DB_NAME(), @val as SchemaContent

}</pre>
	</div>
	</div>
	</div>
	<strong>Скрипт для PostgreSQL:</strong>

	<div class="code">
	<div class="code__widgets">
	<div class="code__source">
	<pre class="prettyprint">
do $$

begin

declare

v_val text := '';

begin

select v_val = concat(v_val, "SchemaName", ', ') into v_val

from(

select "SysSchema"."Name" as "SchemaName"

from "SysSchemaContent"

inner join "SysSchema" on "SysSchemaContent"."SysSchemaId" = "SysSchema"."Id"

inner join "SysPackage" on "SysSchema"."SysPackageId" = "SysPackage"."Id"

where

"SysPackage"."Maintainer" != 'Terrasoft' and

"SysSchema"."ManagerName" in ('EntitySchemaManager', 'PageSchemaManager',

'ProcessSchemaManager', 'ProcessUserTaskSchemaManager', 'SourceCodeSchemaManager') and

(cast("SysSchemaContent"."Content" as text) like '%Terrasoft.Reports%' or

cast("SysSchemaContent"."Content" as text) like '%ReportSchemaManager%')

union

select "SysSchema"."Name" as "SchemaName"

from "SysSchema"

inner join "SysPackage" on "SysSchema"."SysPackageId" = "SysPackage"."Id"

where

"SysPackage"."Maintainer" != 'Terrasoft' and

"SysSchema"."ManagerName" in ('EntitySchemaManager', 'PageSchemaManager',

'ProcessSchemaManager', 'ProcessUserTaskSchemaManager', 'SourceCodeSchemaManager') and

(cast("SysSchema"."MetaData" as text) like '%Terrasoft.Reports%' or

cast("SysSchema"."MetaData" as text) like '%ReportSchemaManager%')

) as "contentList";

end;

end $$;</pre>
	</div>
	</div>
	</div>

	<p><strong>Скрипт  для Oracle:</strong></p>

	<div class="code">
	<div class="code__widgets">
	<div class="code__source">
	<pre class="prettyprint">
begin
	declare
		v_val VARCHAR2(4000) := '';
	begin
		EXECUTE IMMEDIATE 'CREATE OR REPLACE FUNCTION blob_to_clob (blob_in IN BLOB)
		RETURN CLOB
		AS
			 v_clob CLOB;
			 v_varchar VARCHAR2(32767);
			 v_start PLS_INTEGER := 1;
			 v_buffer PLS_INTEGER := 32767;
		BEGIN
			IF blob_in IS NULL THEN
				RETURN NULL;
			END IF;
			 DBMS_LOB.CREATETEMPORARY(v_clob, TRUE);
			
			 FOR i IN 1..CEIL(DBMS_LOB.GETLENGTH(blob_in) / v_buffer)
			 LOOP
				
				v_varchar := UTL_RAW.CAST_TO_VARCHAR2(DBMS_LOB.SUBSTR(blob_in, v_buffer, v_start));
				DBMS_LOB.WRITEAPPEND(v_clob, LENGTH(v_varchar), v_varchar);
				v_start := v_start + v_buffer;
			 END LOOP;
			RETURN v_clob;
		END blob_to_clob;';

		select v_val = concat(concat(v_val, ','), "SchemaName") into v_val
		from(
			select "SysSchema"."Name" as "SchemaName"
			from "SysSchemaContent"
			inner join "SysSchema" on "SysSchemaContent"."SysSchemaId" = "SysSchema"."Id"
			inner join "SysPackage" on "SysSchema"."SysPackageId" = "SysPackage"."Id"
			where
				"SysPackage"."Maintainer" != 'Terrasoft' and
				"SysSchema"."ManagerName" in (
					'EntitySchemaManager',
					'PageSchemaManager',
					'ProcessSchemaManager',
					'ProcessUserTaskSchemaManager',
					'SourceCodeSchemaManager') and
				(blob_to_clob("SysSchemaContent"."Content") LIKE '%Terrasoft.Reports%' or
				 blob_to_clob("SysSchemaContent"."Content") LIKE '%ReportSchemaManager%')
		union
		select "SysSchema"."Name" as "SchemaName"
		from "SysSchema"
		inner join "SysPackage" on "SysSchema"."SysPackageId" = "SysPackage"."Id"
		where
			"SysPackage"."Maintainer" != 'Terrasoft' and
			"SysSchema"."ManagerName" in (
				'EntitySchemaManager',
				'PageSchemaManager',
				'ProcessSchemaManager',
				'ProcessUserTaskSchemaManager',
				'SourceCodeSchemaManager') and
			(blob_to_clob("SysSchema"."MetaData") LIKE '%Terrasoft.Reports%' or
			 blob_to_clob("SysSchema"."MetaData") LIKE '%ReportSchemaManager%')
		);
	end;
end;</pre>
	</div>
	</div>
	</div>

	<p>Если скрипт не вернул результатов, то можете перейти к следующим шагам обновления.<br />
	Если скрипт вернул список замещенных схем, то вам необходимо выполнить анализ схем (сравнить их с коробочной).</p>

	<ol><li>
		<p>Проверить, в каких пакетах находятся схемы из выборки:</p>

		<ol class="inner"><li>
			<p>Если в выборку попали схемы из базовых пакетов: проверить заблокирован ли базовый пакет и значение Maintainer базового пакета должно быть «Terrasoft».</p>
			</li>
			<li>
			<p>Если в выборку попали только схемы из кастомных пакетов, тогда необходимо проанализировать схемы из выборки.</p>
			</li>
		</ol></li>
	</ol><ol><li>
		<p>В случае, если в кастомной в схеме присутствует using Terrasoft.Reports: вам необходимо удалить using (данное действие носит рекомендательных характер и не повлияет на обновление).</p>
		</li>
	</ol><ol><li>
		<p>В случае, если в замещенной в схеме присутствуют упоминания других инструментов для генерирования отчетов, но при этом логика использования не меняется по сравнению с коробочной, тогда вам необходимо воспользоваться <a href="../../../sites/default/files/documents/downloads/Instruction.docx">инструкцией</a>.</p>
		</li>
	</ol><ol><li>
		<p>В случае, если в замещенной в схеме присутствуют упоминания других инструментов для генерирования отчетов и при этом логика формирования отчетов изменена, тогда вам необходимо провести анализ замещений и адаптировать их под работу с пакетом (пакет уже включен в вашу конфигурацию начиная с версии 7.15.0).</p>
		</li>
	</ol></div>
	</div>
	</li>
	<li>
	<p>Перед запуском обновления рекомендуем проверить, что компоненты ваших серверов соответствуют параметрам, перечисленным в контейнере “prerequisites” файла Updater.exe.config, который находится в папке Updater:</p>

	<div class="code">
	<div class="code__widgets">
	<div class="code__source">
	<pre class="prettyprint">
&lt;prerequisites&gt;

      &lt;add name="NetFramework" version="4.7.2"/&gt;

      &lt;add name="NetCore" version="2.2.300"/&gt;

      &lt;add name="VisualCpp" version="Microsoft Visual C++ 2010 Redistributable (x64)"/&gt;

      &lt;add name="Database" version="mssql=2012 SP3;oracle=10;postgresql=9.6"/&gt;

      &lt;add name="IIS" version="7.0.0"/&gt;

      &lt;!-- Redis check does not work in AWS --&gt;

      &lt;!--&lt;add name="Redis" version="3.0.0"/&gt;--&gt;

&lt;/prerequisites&gt;</pre>
	</div>
	</div>
	</div>

	<p>В параметрах указаны минимально необходимые версии компонентов Creatio:</p>

	<ul><li><span>NetFramework — версия .NET Framework;</span></li>
		<li><span>NetCore — версия .NET Core;</span></li>
		<li><span>VisualCpp — версия Visual C++;</span></li>
		<li><span>Database — версия базы данных;</span></li>
		<li><span>IIS — версия сервера IIS;</span></li>
		<li><span>Redis — версия Redis.</span></li>
	</ul><p>Проверку версий утилита Updater выполняет на основании значений “version” параметров.</p>

	<p>Проверка версии для Redis работает только в том случае, если сервер приложений и сервер Redis установлены на одном компьютере. В противном случае закомментируйте параметр “Redis”.</p>
	</li>
	<li>
	<p>В папке с утилитой обновления Updater найдите и запустите файл <strong>Updater.exe</strong> от имени администратора. Также для корректного выполнения обновления у пользователя должны быть права на модификацию папок.</p>

	<div class="message">
	<p><span class="message__bold">На заметку.</span> Чтобы запустить файл от имени администратора, кликните по нему правой кнопкой мыши и в меню выберите “Запуск от имени администратора”.</p>
	</div>

	<p>В ходе выполнения обновления будет последовательно запущено несколько команд, дождитесь завершения процесса.</p>

	<p>Если при запуске обновления вы получили ошибку <strong>"Installed components/software have an outdated/incorrect version. In order to start the Creatio update, please upgrade it"</strong>, то проверьте в списке программных компонентов (над текстом ошибки) какого именно ПО не хватает и установите его.</p>

	<p>Если в процессе обновления возникли другие ошибки, то необходимо прекратить процедуру и обратиться в службу поддержки, предоставив папку с логами обновления: <strong>Каталог CreatioUpdater\InstallPackages\%Version%\Log</strong>.</p>

	<p>Если обновление прошло успешно, то необходимо очистить Redis.</p>

	<p>После успешного обновления необходимо убедиться, что используются микросервисные компоненты последней версии. В противном случае их также необходимо обновить.</p>
	</li>
</ol><div class="block-collapse">
<h3 class="block-collapse__title">Лицензирование приложения при обновлении<a class="title-anchor" href="#title-2443-31" id="title-2443-31"> </a></h3>

<div class="block-collapse__content">Для версий 7.18.0 и выше при каждом обновлении необходимо перелицензировать приложение. Для <strong>версии 7.18.0</strong> заказ и загрузка лицензий выполняются после обновления приложения. Начиная с <strong>версии 7.18.1</strong> заказать и загрузить лицензии можно до начала обновления. О том, как сформировать запрос на лицензии и загрузить их в приложение, читайте в статье <a href="../../user/ustanovka_i_administrirovanie/licenzirovanie/obzor_litsenzirovanie/licenzirovat_creatio.html">Лицензировать Creatio</a>.</div>
</div>

<div class="block-collapse">
<h3 class="block-collapse__title">Восстановление системы перед повторным запуском обновления<a class="title-anchor" href="#title-2443-11" id="title-2443-11"> </a></h3>

<div class="block-collapse__content">
<p>1.Удалите все файлы приложения и скопируйте на их место бинарные файлы из резервной копии, сделанной перед обновлением.</p>

<p>2.Восстановите базу данных из резервной копии.</p>

<p>3.В директории InstallPackages удалите из дочерних папок для всех версий папки App, Log, Pkg, Temp, Template, если они были созданы.</p>

<p>4.Внесите изменения, которые вам перечислит служба поддержки в ответе на письмо с логом обновления.</p>

<p>После выполнения этих шагов можно повторно запускать обновление приложения.</p>
</div>
</div>

<div class="block-collapse">
<h3 class="block-collapse__title">При обновлении на версию 7.8.2<a class="title-anchor" href="#title-2443-12" id="title-2443-12"> </a></h3>

<div class="block-collapse__content">
<p>Если для разработки используется система контроля версий SVN, после установки обновления необходимо дополнительно выполнить утилиту FlatPackageConverter, которая:</p>

<p>1.Перестраивает структуру ресурсов. Ресурсы будут относиться к пакету, а не схеме.</p>

<p>2.Исправляет некорректные свойства SVN файлов ресурсов.</p>

<p>3.Исправляет некорректные имена культур.</p>

<p>4.Удаляет некорректные файлы ресурсов (пустые или без элементов) и ресурсы, у которых нет схем в этом же пакете.</p>

<p>Скачайте и распакуйте архив <span><a href="https://academy.creatio.com/files/FlatPackageConverter.rar">FlatPackageConverter.rar</a></span>. Откройте в любом текстовом редакторе файл example.bat, который отвечает за запуск утилиты FlatPackageConverter.exe c нужными параметрами в виде:</p>

<div class="code">
<div class="code__widgets">
<div class="code__source">
<pre class="prettyprint">
FlatPackageConverter.exe relocateResources

--repositoryUri=&lt;repositoryUri&gt; --version=&lt;version&gt; --user=&lt;user&gt;

--password=&lt;password&gt; --commentFilePath=&lt;commentFilePath&gt;

--copyPath=&lt;copyPath&gt; --kind=&lt;kind&gt;

--needDeletedWrongResources=&lt;needDeletedWrongResources&gt;</pre>
</div>
</div>
</div>

<p>Описание используемых параметров представлено в таблице.</p>

<div class="table">
<table cellspacing="0"><tbody><tr><th>
			<p class="FM_Tablecelltextleft">Параметр</p>
			</th>
			<th>
			<p class="FM_Tablecelltextleft">Описание</p>
			</th>
		</tr><tr><td>
			<p class="FM_Tablecelltextleft">&lt;repositoryUri&gt;</p>
			</td>
			<td>
			<p class="FM_Tablecelltextleft">Путь к вашему репозиторию SVN.</p>
			</td>
		</tr><tr><td>
			<p class="FM_Tablecelltextleft">&lt;version&gt;</p>
			</td>
			<td>
			<p class="FM_Tablecelltextleft">Версия пакетов, структуру которых необходимо обновить.</p>
			</td>
		</tr><tr><td>
			<p class="FM_Tablecelltextleft">&lt;user&gt;</p>
			</td>
			<td>
			<p class="FM_Tablecelltextleft">Логин пользователя SVN.</p>
			</td>
		</tr><tr><td>
			<p class="FM_Tablecelltextleft">&lt;password&gt;</p>
			</td>
			<td>
			<p class="FM_Tablecelltextleft">Пароль пользователя SVN.</p>
			</td>
		</tr><tr><td>
			<p class="FM_Tablecelltextleft">&lt;commentFilePath&gt;</p>
			</td>
			<td>
			<p class="FM_Tablecelltextleft">Путь к локальному файлу, который содержит комментарий для фиксации изменений в SVN.</p>
			</td>
		</tr><tr><td>
			<p class="FM_Tablecelltextleft">&lt;copyPath&gt;</p>
			</td>
			<td>
			<p class="FM_Tablecelltextleft">Путь к директории, в которую будут копироваться временные файлы, необходимые для работы утилиты.</p>
			</td>
		</tr><tr><td rowspan="4">
			<p class="FM_Tablecelltextleft">&lt;kind&gt;</p>
			</td>
			<td>
			<p class="FM_Tablecelltextleft">Определяет тип перемещения ресурсов:</p>
			</td>
		</tr><tr><td>
			<ul><li>
				<p class="FM_Tablecellbullet">"package" — перемещение ресурсов на уровне пакета (7.8.1 –&gt; 7.8.2) с добавлением имени менеджера;</p>
				</li>
			</ul></td>
		</tr><tr><td>
			<ul><li>
				<p class="FM_Tablecellbullet">"schemas" — перемещение ресурсов из схем в пакеты с добавлением имени менеджера (7.7.x –&gt; 7.8.2);</p>
				</li>
			</ul></td>
		</tr><tr><td>
			<ul><li>
				<p class="FM_Tablecellbullet">"oldschemas" — перемещение ресурсов из схем в пакеты (7.7.x –&gt; 7.8.0).</p>
				</li>
			</ul></td>
		</tr><tr><td rowspan="2">
			<p class="FM_Tablecelltextleft">&lt;needDeletedWrongResources&gt;</p>
			</td>
			<td>
			<p class="FM_Tablecelltextleft">True — удаляет все некорректные файлы ресурсов; записывает всю информацию в журнал удаления. Рекомендуемая опция.</p>
			</td>
		</tr><tr><td>
			<p class="FM_Tablecelltextleft">False — выводит информацию об ошибках и предупреждениях, которые затем необходимо исправить вручную.</p>
			</td>
		</tr></tbody></table></div>

<p>Пример обновления Creatio версии 7.8.1 на 7.8.2 будет иметь вид:</p>

<div class="code">
<div class="code__widgets">
<div class="code__source">
<pre class="prettyprint">
FlatPackageConverter.exe relocateResources

--repositoryUri=http://svn-server/svn/ts5conf/branches/TestPS_14

--version=7.8.0 --user=login --password=password

--commentFilePath=C:\Temp\111.txt --copyPath=C:\Temp\1 --kind=package --needDeletedWrongResources=True</pre>
</div>
</div>
</div>

<div class="message">
<p><span class="message__bold">На заметку.</span> В данном примере параметр --version=7.8.0 не является ошибкой, так как указывает версию пакетов, которую необходимо изменить для обновления. Не забудьте указать свой логин и пароль для доступа к репозиторию.</p>
</div>

<div class="message message_warning">
<p><span class="message__bold message__bold_warning">Важно.</span> После выполнения утилита выдаст список ошибок и предупреждений, детальная информация по каждому пакету будет содержаться в журнале. Под ошибками подразумевается наличие ресурсов в пакете без схем, под предупреждениями — наличие пустых файлов ресурсов, которые не содержат ни единого элемента. Чтобы удалить все некорректные файлы ресурсов, используйте параметр needDeletedWrongResources=True.</p>
</div>
</div>

<div class="block-collapse">
<h3 class="block-collapse__title">При обновлении на версию 7.8.4<a class="title-anchor" href="#title-2443-13" id="title-2443-13"> </a></h3>

<div class="block-collapse__content">
<p>Если для разработки используется система контроля версий SVN, после установки обновления необходимо дополнительно выполнить утилиту FlatPackageConverter, которая удаляет устаревшие файлы ресурсов схем.</p>

<p>Скачайте и распакуйте архив <span><a href="https://academy.creatio.com/files/FlatPackageConverter.rar">FlatPackageConverter.rar</a></span>. Откройте в любом текстовом редакторе файл example.bat, который отвечает за запуск утилиты FlatPackageConverter.exe c нужными параметрами в виде:</p>

<div class="code">
<div class="code__widgets">
<div class="code__source">
<pre class="prettyprint">
"Полный путь к FlatPackageConverter.exe" deleteSchemaLegacyResources

--repositoryUri=&lt;repositoryUri&gt; --version=&lt;version&gt; --user=&lt;user&gt;

--password=&lt;password&gt; --commentFilePath=&lt;commentFilePath&gt;

--copyPath=&lt;copyPath&gt;</pre>
</div>
</div>
</div>

<p>Описание используемых параметров представлено в таблице.</p>

<div class="table">
<table cellspacing="0"><tbody><tr><td>
			<p class="FM_Tablecelltextleft">Параметр</p>
			</td>
			<td>
			<p class="FM_Tablecelltextleft">Описание</p>
			</td>
		</tr><tr><td>
			<p class="FM_Tablecelltextleft">&lt;repositoryUri&gt;</p>
			</td>
			<td>
			<p class="FM_Tablecelltextleft">Путь к вашему репозиторию SVN.</p>
			</td>
		</tr><tr><td>
			<p class="FM_Tablecelltextleft">&lt;version&gt;</p>
			</td>
			<td>
			<p class="FM_Tablecelltextleft">Версия пакетов, структуру которых необходимо обновить.</p>
			</td>
		</tr><tr><td>
			<p class="FM_Tablecelltextleft">&lt;user&gt;</p>
			</td>
			<td>
			<p class="FM_Tablecelltextleft">Логин пользователя SVN.</p>
			</td>
		</tr><tr><td>
			<p class="FM_Tablecelltextleft">&lt;password&gt;</p>
			</td>
			<td>
			<p class="FM_Tablecelltextleft">Пароль пользователя SVN.</p>
			</td>
		</tr><tr><td>
			<p class="FM_Tablecelltextleft">&lt;commentFilePath&gt;</p>
			</td>
			<td>
			<p class="FM_Tablecelltextleft">Путь к локальному файлу, который содержит комментарий для фиксации изменений в SVN.</p>
			</td>
		</tr><tr><td>
			<p class="FM_Tablecelltextleft">&lt;copyPath&gt;</p>
			</td>
			<td>
			<p class="FM_Tablecelltextleft">Путь к директории, в которую будут копироваться временные файлы, необходимые для работы утилиты.</p>
			</td>
		</tr></tbody></table></div>

<p>Пример обновления Creatio версии 7.8.3 на 7.8.4 будет иметь вид:</p>

<div class="code">
<div class="code__widgets">
<div class="code__source">
<pre class="prettyprint">
FlatPackageConverter.exe deleteSchemaLegacyResources

--repositoryUri=http://svn-server/svn/ts5conf/branches/TestPS_14

--version=7.8.0 --user="login" --password="password"

--commentFilePath=C:\Temp\111.txt --copyPath=C:\Temp\1</pre>
</div>
</div>
</div>

<div class="message">
<p><span class="message__bold">На заметку.</span> В данном примере параметр --version=7.8.0 не является ошибкой, так как указывает версию пакетов, которую необходимо изменить для обновления. Не забудьте указать свой логин и пароль для доступа к репозиторию.</p>
</div>

<div class="message message_warning">
<p><span class="message__bold message__bold_warning">Важно.</span> После выполнения утилита выдаст перечень ошибок и предупреждений. Детальная информация по каждому пакету будет указана в журнале Out.txt, который находится той же директории, что и утилита. Ошибка “svn: E195022: is locked in another working copy” в журнале означает, что некоторые файлы в репозитории заблокированы. Их необходимо разблокировать и перезапустить утилиту.</p>
</div>
</div>
</div>

<div class="block-collapse">
<h3 class="block-collapse__title">При обновлении на версию 7.9.0<a class="title-anchor" href="#title-2443-14" id="title-2443-14"> </a></h3>

<div class="block-collapse__content">
<p>Если для разработки используется система контроля версий SVN, после установки обновления необходимо дополнительно выполнить утилиту FlatPackageConverter, которая очищает метаданные от неправильно сформированных метаданных локализируемых строк.</p>

<p>Скачайте и распакуйте архив <span><a href="https://academy.creatio.com/files/FlatPackageConverter.rar">FlatPackageConverter.rar</a></span>. Откройте в любом текстовом редакторе файл example.bat, который отвечает за запуск утилиты FlatPackageConverter.exe c нужными параметрами в виде:</p>

<div class="code">
<div class="code__widgets">
<div class="code__source">
<pre class="prettyprint">
"Полный путь к FlatPackageConverter.exe" fixResourcesInMetadata

--repositoryUri=&lt;repositoryUri&gt; --version=&lt;version&gt; --user=&lt;user&gt;

--password=&lt;password&gt; --commentFilePath=&lt;commentFilePath&gt;

--copyPath=&lt;copyPath&gt;</pre>
</div>
</div>
</div>

<p>Описание используемых параметров представлено в таблице.</p>

<div class="table">
<table cellspacing="0"><tbody><tr><td>
			<p class="FM_Tablecelltextleft">Параметр</p>
			</td>
			<td>
			<p class="FM_Tablecelltextleft">Описание</p>
			</td>
		</tr><tr><td>
			<p class="FM_Tablecelltextleft">&lt;repositoryUri&gt;</p>
			</td>
			<td>
			<p class="FM_Tablecelltextleft">Путь к вашему репозиторию SVN.</p>
			</td>
		</tr><tr><td>
			<p class="FM_Tablecelltextleft">&lt;version&gt;</p>
			</td>
			<td>
			<p class="FM_Tablecelltextleft">Версия пакетов, структуру которых необходимо обновить.</p>
			</td>
		</tr><tr><td>
			<p class="FM_Tablecelltextleft">&lt;user&gt;</p>
			</td>
			<td>
			<p class="FM_Tablecelltextleft">Логин пользователя SVN.</p>
			</td>
		</tr><tr><td>
			<p class="FM_Tablecelltextleft">&lt;password&gt;</p>
			</td>
			<td>
			<p class="FM_Tablecelltextleft">Пароль пользователя SVN.</p>
			</td>
		</tr><tr><td>
			<p class="FM_Tablecelltextleft">&lt;commentFilePath&gt;</p>
			</td>
			<td>
			<p class="FM_Tablecelltextleft">Путь к локальному файлу, который содержит комментарий для фиксации изменений в SVN.</p>
			</td>
		</tr><tr><td>
			<p class="FM_Tablecelltextleft">&lt;copyPath&gt;</p>
			</td>
			<td>
			<p class="FM_Tablecelltextleft">Путь к директории, в которую будут копироваться временные файлы, необходимые для работы утилиты.</p>
			</td>
		</tr></tbody></table></div>

<p>Пример обновления Creatio версии 7.8.4 на 7.9.0 будет иметь вид:</p>

<div class="code">
<div class="code__widgets">
<div class="code__source">
<pre class="prettyprint">
FlatPackageConverter.exe fixResourcesInMetadata

--repositoryUri=http://svn-server/svn/ts5conf/branches/TestPS_14

--version=7.8.0 --user="login" --password="password"

--commentFilePath=C:\Temp\111.txt --copyPath=C:\Temp\1</pre>
</div>
</div>
</div>

<div class="message">
<p><span class="message__bold">На заметку.</span> В данном примере параметр --version=7.8.0 не является ошибкой, так как указывает версию пакетов, которую необходимо изменить для обновления. Не забудьте указать свой логин и пароль для доступа к репозиторию.</p>
</div>

<div class="message message_warning">
<p><span class="message__bold message__bold_warning">Важно.</span> После выполнения утилита выдаст перечень ошибок и предупреждений. Детальная информация по каждому пакету будет указана в журнале Out.txt, который находится той же директории, что и утилита. Ошибка “svn: E195022: is locked in another working copy” в журнале означает, что некоторые файлы в репозитории заблокированы. Их необходимо разблокировать и перезапустить утилиту.</p>
</div>
</div>
</div>

<div class="block-collapse">
<h3 class="block-collapse__title">При использовании Redis Sentinel<a class="title-anchor" href="#title-2443-15" id="title-2443-15"> </a></h3>

<div class="block-collapse__content">
<p>Если у вас развернута отказоустойчивая конфигурация Redis, то при обновлении системы на версию 7.15.2 и выше обратитесь, пожалуйста, в службу поддержки Creatio за дополнительной информацией относительно системы Redis Sentinel, которая обеспечивает высокую надежность Redis.</p>

<p>Поддержка Redis Sentinel будет прекращена в Creatio версии 7.18.3. Рекомендуем после обновления Creatio до версии 7.18.0 и выше перейти на механизм <a href="../../user/razvertyvanie_onsite/server_keshirovaniya/redis_cluster/nastroit_redis_cluster/index.html">Redis Cluster</a>.</p>
</div>
</div>
</div>

<div class="block-collapse">
<h3 class="block-collapse__title">При обновлении с целью расширения продукта<a class="title-anchor" href="#title-2443-21" id="title-2443-21"> </a></h3>

<div class="block-collapse__content">
<div class="message">
<p><span class="message__bold">На заметку.</span> Чтобы выполнить расширение продукта, например, с Sales Creatio Enterprise edition на CRM-линейку, вам потребуются дистрибутивные файлы нового продукта той же версии, что ваше текущее приложение.</p>
</div>

<ol><li>Скачайте сервис выгрузки дистрибутивов для обновления: <a href="https://academy.creatio.com/sites/default/files/documents/downloads/UpdaterService/UpdaterService.zip">скачать сервис</a>.</li>
	<li>Найдите в папке Updater файл <strong>Updater.exe.config</strong>.</li>
	<li>
	<p>В блок appSettings добавьте строку:</p>

	<div class="code">
	<div class="code__widgets">
	<div class="code__source">
	<pre class="prettyprint">
&lt;add key="Feature-SkipProductValidation" value="true"/&gt;
</pre>
	</div>
	</div>
	</div>
	</li>
	<li>Обновите приложение по стандартному сценарию. Обновление выполняется на ту же версию, которая была до расширения.</li>
</ol></div>
</div>

<p>Если в ваши web.config файлы ранее вносились дополнительные настройки, например, настройки интеграций или внешних сервисов, то их необходимо перенести вручную после успешного обновления.</p>

<h2><a name="XREF_19782" id="XREF_19782"></a><a name="CSH_1" id="CSH_1"></a><a name="HT_user_upgrade_instruction_stop" id="HT_user_upgrade_instruction_stop"></a><a name="HT_user_upgrade_instruction_stop" id="HT_user_upgrade_instruction_stop"></a>Остановка сайта<a class="title-anchor" href="#title-2443-16" id="title-2443-16"> </a></h2>

<p>Чтобы избежать потери данных, рекомендуем остановить продуктивный сайт, прежде чем выполнять обновление.</p>

<ol><li>Откройте Internet Information Services (IIS) Manager.</li>
	<li> Остановите продуктивный сайт с помощью команды <span class="key">Stop</span> в области <span class="key">Actions</span>. (<a href="#XREF_68456_1_IIS">Рис. 2</a>).</li>
</ol><div class="media">
<div class="media__caption"><span class="FM_Picturecaptionnumber">Рис. 2</span><a name="XREF_68456_1_IIS" id="XREF_68456_1_IIS"></a> — Остановка сайта в IIS</div>

<div class="media__element"><img alt="scr_user_upgrade_instruction_site_start" data-entity-type="file" data-entity-uuid="23767f41-589d-4af0-bb5d-e494dac15fc1" src="../../sites/default/files/inline-images/scr_user_upgrade_instruction_site_start.png" width="797" height="659" loading="lazy" /></div>
</div>

<h2><a name="CSH_4" id="CSH_4"></a><a name="HT_user_upgrade_instruction_test_upgrade" id="HT_user_upgrade_instruction_test_upgrade"></a><a name="XREF_80516" id="XREF_80516"></a><a name="HT_user_upgrade_instruction_test_upgrade" id="HT_user_upgrade_instruction_test_upgrade"></a>Запуск, компиляция и проверка работы сайта<a class="title-anchor" href="#title-2443-17" id="title-2443-17"> </a></h2>

<p>После обновления Creatio необходимо запустить сайт, компилировать приложение и убедиться в корректности работы сайта:</p>

<ol><li>Откройте Internet Information Services (IIS) Manager.</li>
	<li>Запустите сайт с помощью команды <span class="key">Start</span> в области <span class="key">Actions</span>.</li>
	<li>Откройте сайт в браузере с помощью команды <span class="key">Browse</span> в области <span class="key">Actions</span> (<a href="#XREF_17392_8"><span>Рис. 3</span></a>).
	<div class="media">
	<div class="media__caption"><span class="FM_Picturecaptionnumber">Рис. 3</span><a name="XREF_17392_8" id="XREF_17392_8"></a> — Открытие тестового сайта в веб-браузере</div>

	<div class="media__element"><img alt="scr_user_upgrade_instruction_test_site_browse.png" id="image2" src="../../../sites/default/files/scr_user_upgrade_instruction_test_site_browse.png" /></div>
	</div>

	<div class="message message_warning">
	<p><span class="message__bold message__bold_warning">Важно.</span> Если в процессе обновления возникли ошибки, то необходимо прекратить процедуру и проверить логи обновления, которые находятся в папке: <span class="key">Каталог CreatioUpdater</span>\InstallPackages\%Version%\Log. При наличии ошибки вида “Error:Error ” или “Ошибка:Ошибка ” в базовых пакетах, обратитесь в службу поддержки, предоставив папку с логами. Если ошибки возникли в пользовательских пакетах, то необходимо обратиться к разработчикам, которые их создали.</p>
	</div>
	</li>
	<li>Для перегенерации клиентского статического контента выполните действие <span class="key">Компилировать все</span> в разделе <span class="key">Конфигурация</span>.</li>
	<li>Войдите в приложение и проверьте корректность выполнения часто используемых операций.
	<div class="message">
	<p><span class="message__bold">На заметку.</span> При выполнении обновления могут сбиться настройки состояния сессии (Session state) в IIS. Это приводит к невозможности входа в мобильное приложение. После выполнения обновления проверьте, чтобы в настройках cookies в IIS был установлен режим (mode) "Use Cookies".</p>
	</div>
	</li>
	<li>Если все работает корректно, можно удалить резервные копии приложения и базы данных.</li>
</ol><div class="block-collapse">
<h3 class="block-collapse__title">При обновлении на версию 7.10.1<a class="title-anchor" href="#title-2443-18" id="title-2443-18"> </a></h3>

<div class="block-collapse__content">
<p>После обновления Creatio на версию 7.10.1, адрес и IP сервиса обогащения данных будут изменены. Для получения новых адреса и IP сервиса обратитесь в службу поддержки.</p>

<p>Ранее действующий адрес <strong>cloud-service.bpmonline.com</strong> (ip: 188.99.10.125) теперь используется только для функциональности Marketing Creatio (например, для email-рассылок).</p>
</div>
</div>

<div class="block-collapse">
<h3 class="block-collapse__title">При обновлении на версию 7.11.1 (для продукта Financial Services Creatio, lending edition)<a class="title-anchor" href="#title-2443-19" id="title-2443-19"> </a></h3>

<div class="block-collapse__content">
<p>Если вы используете Financial Services Creatio, lending edition, и в вашем приложении кастомизирована страница заявки (FinApplicationPage), то после базового сценария обновления необходимо выполнить следующие действия.</p>

<ol class="start"><li>
	<p>Скачайте последнюю ревизию пакетов из svn.</p>
	</li>
</ol><ol><li>
	<p>Запустите утилиту UpdateFinAppLendingPage.</p>

	<p>Формат запуска утилиты из командной строки: UpdateFinAppLendingPage.exe "Путь к скачанной рабочей копии svn".</p>

	<p>Пример запуска: UpdateFinAppLendingPage.exe C:\MyPackagesFromSvn\.</p>
	</li>
</ol><ol><li>
	<p>Зафиксируйте изменения на сервере svn.</p>
	</li>
</ol><ol><li>
	<p>Обновите конфигурацию из svn.</p>
	</li>
</ol></div>
</div>

<div class="block-collapse">
<h3 class="block-collapse__title">При обновлении на версию 7.16.0<a class="title-anchor" href="#title-2443-20" id="title-2443-20"> </a></h3>

<div class="block-collapse__content">
<p>После обновления Creatio на версию 7.16.0 для корректной работы почтовых сервисов IMAP/SMTP и Exchange необходимо развернуть сервис синхронизации <span><a href="../../user/razvertyvanie_onsite/nastrojka_konteinernikh_komponentov/exchange_listener/nastroit_servis_sinkhronizacii_exchange_listener.html?product=administration&amp;ver=7&amp;id=2074">Exchange Listener</a></span>.</p>
</div>
</div>

<div class="block-collapse">
<h3 class="block-collapse__title">При обновлении на версии 7.16.1 и 7.16.2<a class="title-anchor" href="#title-143-16" id="title-143-16"> </a></h3>

<div class="block-collapse__content">
<p>Перед обновлением на версии 7.16.1 и 7.16.2 убедитесь в отсутствии кастомизаций с использованием устаревшей библиотеки и класса Terrasoft.Mail.SmtpClient в вашей конфигурации.</p>

<p>Для этого выполните скрипт.</p>

<p><strong>Скрипт для MSSQL</strong></p>

<div class="code">
<div class="code__widgets">
<div class="code__source">
<pre class="prettyprint">
SELECT SysSchema.Name AS SchemaName FROM SysSchema (NOLOCK) WHERE SysSchema.Id IN ( SELECT SysSchemaId FROM SysSchemaSource WHERE SysSchemaId IN ( SELECT ss.Id FROM SysSchema ss WITH (NOLOCK) INNER JOIN SysPackage sp WITH (NOLOCK) ON ss.SysPackageId = sp.Id WHERE sp.Name NOT IN ('Base', 'ProcessDesigner', 'NUI', 'SSP') AND sp.Maintainer != 'Terrasoft' AND ss.ManagerName NOT IN ('ClientUnitSchemaManager', 'DcmSchemaManager', 'PageSchemaManager') ) AND (Source LIKE '%MailBe%' OR (Source like '%SmtpClient%' AND Source like '%Terrasoft.Mail%')) )</pre>
</div>
</div>
</div>

<p><strong>Скрипт для Oracle Database</strong></p>

<p>Выполните первый скрипт, чтобы создать процедуру:</p>

<div class="code">
<div class="code__top"> </div>

<div class="code__widgets">
<div class="code__source">
<pre class="prettyprint">
BEGIN EXECUTE IMMEDIATE 'CREATE OR REPLACE FUNCTION blob_to_clob (blob_in IN BLOB) RETURN CLOB AS v_clob CLOB; v_varchar VARCHAR2(32767); v_start PLS_INTEGER := 1; v_buffer PLS_INTEGER := 32767; BEGIN IF blob_in IS NULL THEN RETURN NULL; END IF; DBMS_LOB.CREATETEMPORARY(v_clob, TRUE); FOR i IN 1..CEIL(DBMS_LOB.GETLENGTH(blob_in) / v_buffer) LOOP v_varchar := UTL_RAW.CAST_TO_VARCHAR2(DBMS_LOB.SUBSTR(blob_in, v_buffer, v_start)); DBMS_LOB.WRITEAPPEND(v_clob, LENGTH(v_varchar), v_varchar); v_start := v_start + v_buffer; END LOOP; RETURN v_clob; END blob_to_clob;'; END;</pre>
</div>
</div>
</div>

<p>Далее выполните основной скрипт:</p>

<div class="code">
<div class="code__top"> </div>

<div class="code__widgets">
<div class="code__source">
<pre class="prettyprint">
SELECT "SysSchema"."Name" AS "SchemaName" FROM "SysSchema" WHERE "SysSchema"."Id" IN ( SELECT "SysSchemaId" FROM "SysSchemaSource" WHERE "SysSchemaId" IN ( SELECT ss."Id" FROM "SysSchema" ss INNER JOIN "SysPackage" sp ON ss."SysPackageId" = sp."Id" WHERE sp."Name" NOT IN ('Base', 'ProcessDesigner', 'NUI', 'SSP') AND sp."Maintainer" != 'Terrasoft' AND ss."ManagerName" NOT IN ('ClientUnitSchemaManager', 'DcmSchemaManager', 'PageSchemaManager') ) AND (blob_to_clob("Source") LIKE '%MailBe%' OR ( blob_to_clob("Source") LIKE '%SmtpClient%' AND blob_to_clob("Source") LIKE '%Terrasoft.Mail%' ) ) );</pre>
</div>
</div>

<p>Если скрипт не вернул результатов, то можете перейти к следующим шагам обновления.</p>

<p>Если скрипт вернул список схем, то выполните следующие шаги:</p>

<ol><li>
	<p>Проверьте, в каких пакетах находятся схемы из выборки:</p>

	<ul><li>
		<p>Если в выборку попали схемы из базовых пакетов, то проверьте, заблокирован ли базовый пакет и установлено ли значение Maintainer базового пакета как "Terrasoft".</p>
		</li>
		<li>
		<p>Если в выборку попали только схемы из кастомных пакетов, то проанализируйте схемы из выборки.</p>
		</li>
	</ul></li>
	<li>
	<p>Если кастомная схема содержит директиву "using", но не включает ее типы, то удалите "using".</p>
	</li>
	<li>
	<p>Если кастомная схема содержит устаревшие директивы, то измените механизм согласно следующей инструкции: "<span><a href="../../developer/komponenty_prilozheniya/email_soobshcheniya/otpravka_email_soobshchenij/obzor/index.html">Отправка email-сообщений</a>"</span>.</p>
	</li>
</ol></div>
</div>
</div>

<div class="block-collapse">
<h3 class="block-collapse__title">При обновлении на версию 7.17.1<a class="title-anchor" href="#title-143-16" id="title-143-16"> </a></h3>

<div class="block-collapse__content">
<p>Если вы используете продукт Marketing Creatio или CRM-линейку, в которую он входит, то убедитесь, что перед обновлением на версию 7.17.1 приложение было перелицензировано. Иначе после выполнения обновления могут возникнуть ошибки при подсчете количества лицензий активных контактов и отправке рассылок. Подробнее: <a href="../../user/ustanovka_i_administrirovanie/licenzirovanie/obzor_litsenzirovanie/licenzirovat_creatio.html?id=1471">Лицензирование</a>.</p>
</div>
</div>

<p>Приятной работы в новой версии Creatio!</p>
</div>
      
  </div>

    </div>
  </div>

  </div>

</article>

  </div>

  </div>

          </div>
        </div>

                  <aside class="creatio-sidebar creatio-sidebar_first" role="complementary">
              <div class="region region-sidebar-first">
    <div id="block-documentationnaviagtion" class="block block-ts-nav block-ts-nav-doc-nav">
  
    
      <div class="ts-nav-block"><a href="../../index.html" class="ts-nav-block__link">Документация</a><div class="ts-nav-block__title">Релизы</div>
</div>
<div class="ts-nav-container"><ul class="ts-nav-menu"><li class="ts-nav-menu__item">
  <a href="../opisanie-relizov/opisanie-reliza-80-atlas.html" class="ts-nav-menu__link ts-nav-menu__link_expanded" hreflang="zxx">Описание релизов&nbsp;<span class="ts-nav-menu__link__arrow"></span></a>
  </li>
<li class="ts-nav-menu__item">
  <a href="instrukciya-po-obnovleniyu.html" class="ts-nav-menu__link ts-nav-menu__link_open" hreflang="zxx">Инструкция по обновлению on-site</a>
  </li>
<li class="ts-nav-menu__item">
  <a href="../../kalendar_relizov.html" class="ts-nav-menu__link" hreflang="ru">Календарь релизов</a>
  </li>
</ul>
</div>

  </div>

  </div>

            <div class="creatio-sidebar__toggle"></div>
          </aside>
        
                  <aside class="creatio-sidebar creatio-sidebar_second" role="complementary">
              <div class="region region-sidebar-second">
    <div id="block-example" class="block block-ts-nav block-ts-nav-page-nav">
  
    
      <div class="ts-nav-page">
  </div>

  </div>

  </div>

          </aside>
              </main>
    </div>
  </div>

  <footer role="contentinfo">
    <div class="creatio-region creatio-region_footer">
      <div class="creatio-container">
          <div class="region region-footer">
    <div id="block-footerua" class="block block-simple-block block-simple-blockfooter-ua">
  
    
      <div class="footer">
<div class="footer-left">
<ul class="footer-socials"><li class="footer-socials__item"><a class="footer-socials__link footer-socials__link_fb" href="https://www.facebook.com/terrasoft.ua" target="_blank"> </a></li>
	<li class="footer-socials__item"><a class="footer-socials__link footer-socials__link_in" href="https://www.linkedin.com/company/terrasoft/" target="_blank"> </a></li>
	<li class="footer-socials__item"><a class="footer-socials__link footer-socials__link_yt" href="https://www.youtube.com/c/TerrasoftUkraine" target="_blank"> </a></li>
	<li class="footer-socials__item"><a class="footer-socials__link footer-socials__link_tg" href="https://t.me/Terrasoft_UA" target="_blank"> </a></li>
</ul></div>

<div class="footer-contact">
<div class="footer-title">Будьте на связи!</div>

<div class="footer-content">
<div class="footer-items">
<div class="footer-item"><a class="footer__link footer__link_phone" href="tel:+380443633133">+38 (044) 363-31-33</a></div>
</div>

<div class="footer-items">
<div class="footer-item"><a class="footer__link footer__link_email" href="mailto:support@terrasoft.ua">support@terrasoft.ua</a></div>
</div>
</div>
</div>
</div>

  </div>

  </div>

      </div>
    </div>
    <div class="creatio-region creatio-region_bottom">
      <div class="creatio-container">
          <div class="region region-bottom">
    <div id="block-allrightsreservedua" class="block block-simple-block block-simple-blockfooter-bottom-ua">
  
    
      <p>© 2002-2022 Terrasoft.  |  <a href="https://www.terrasoft.ua/privacy-policy" target="_blank">Конфиденциальность</a></p>

  </div>

  </div>

      </div>
    </div>
  </footer>
</div>
<div class="creatio-bg"></div>


  </div>

    
    <script type="application/json" data-drupal-selector="drupal-settings-json">{"path":{"baseUrl":"\/docs\/","scriptPath":null,"pathPrefix":"","currentPath":"node\/2443","currentPathIsAdmin":false,"isFront":false,"currentLanguage":"ru"},"pluralDelimiter":"\u0003","suppressDeprecationErrors":true,"user":{"uid":0,"permissionsHash":"9c2367dfcaba0fa15f0375f97aed64e146c908cee68508d13b79e3ee80e5162d"}}</script>
<script src="../../sites/default/files/js/js_FonWNMi4BKsDmL0ZoTzpspjDTVOOmvH8kRVrhApn-uo.js"></script>


    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
      <g id="svg-copy" class="svg-icon svg-icon_copy">
        <path d="M15.111,18H1.889A1.848,1.848,0,0,1,0,16.2V3.6A1.848,1.848,0,0,1,1.889,1.8H5.837a2.87,2.87,0,0,1,5.326,0h3.948A1.848,1.848,0,0,1,17,3.6V16.2A1.848,1.848,0,0,1,15.111,18ZM3.777,12.6v1.8h6.611V12.6Zm0-3.6v1.8h9.445V9Zm0-3.6V7.2h9.445V5.4ZM8.5,1.8a.924.924,0,0,0-.944.9.945.945,0,0,0,1.889,0A.924.924,0,0,0,8.5,1.8Z"/>
      </g>

      <g id="svg-prev" class="svg-icon svg-icon_arrow">
        <path d="M5.488,12.779,0,6.39,5.488,0" transform="translate(1 0.652)"/>
      </g>

      <g id="svg-next" class="svg-icon svg-icon_arrow">
        <path d="M0,12.779,5.488,6.39,0,0" transform="translate(0.759 0.652)"/>
      </g>
    </svg>
  </body>

<!-- Mirrored from academy.terrasoft.ua/docs/release/instrukciya-po-obnovleniyu-site/instrukciya-po-obnovleniyu by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 22 Mar 2022 19:53:54 GMT -->
</html>
